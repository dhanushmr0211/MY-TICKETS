<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Booking Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    // Function to get URL parameters
    function getQueryParams() {
      let params = new URLSearchParams(window.location.search);
      return {
        title: params.get("title"),
        price: parseInt(params.get("price"))
      };
    }

    // Function to update total price
    function updateTotal() {
      let qty = parseInt(document.getElementById("qty").value);
      let price = parseInt(document.getElementById("price").textContent);
      document.getElementById("total").textContent = qty * price;
    }

    // Initialize booking details
    window.onload = function() {
      let params = getQueryParams();
      document.getElementById("eventTitle").textContent = params.title;
      document.getElementById("price").textContent = params.price;
      updateTotal();
    };
  </script>

  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
<script>
window.onload = function () {
  let params = getQueryParams();
  document.getElementById("eventTitle").textContent = params.title;
  document.getElementById("price").textContent = params.price;
  updateTotal();

  // Save image too (from URL param)
  let image = new URLSearchParams(window.location.search).get("image") || "default.jpg";

  document.getElementById("confirm-booking").onclick = function (e) {
    let total = parseInt(document.getElementById("total").textContent); 
    let title = document.getElementById("eventTitle").textContent;

    var options = {
      "key": "rzp_test_RD9NppJFgIFzff",  
      "amount": total * 100, // in paise
      "currency": "INR",
      "name": title,   // ✅ Now event name is dynamic
      "description": "Ticket Payment",
      "handler": function (response) {
        window.location.href = `thankyou.html?payment_id=${response.razorpay_payment_id}&title=${encodeURIComponent(title)}&amount=${total}&image=${encodeURIComponent(image)}`;
      }
    };

    var rzp1 = new Razorpay(options);
    rzp1.open();
    e.preventDefault();
  }
};
</script>



</head>
<body class="bg-light">

<div class="container my-5">
  <div class="card shadow p-4">
    <h2 id="eventTitle" class="mb-3"></h2>
    <p><strong>Ticket Price:</strong> ₹<span id="price"></span></p>

    <div class="d-flex align-items-center mb-3">
      <label class="me-3"><strong>Quantity:</strong></label>
      <button class="btn btn-outline-secondary" onclick="document.getElementById('qty').stepDown(); updateTotal();">-</button>
      <input id="qty" type="number" value="1" min="1" class="form-control text-center mx-2" style="width:80px;" onchange="updateTotal()">
      <button class="btn btn-outline-secondary" onclick="document.getElementById('qty').stepUp(); updateTotal();">+</button>
    </div>

    <p><strong>Total Price:</strong> ₹<span id="total"></span></p>

    <button id="confirm-booking" class="btn btn-success w-100">Confirm Booking</button>

  </div>
</div>


  
</body>
</html>
